<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WES WindKompass</title>

  <style>
    :root{
      --pad: 22px;
      --inner-max: 1100px;

      /* glass content container */
      --glass-bg: rgba(255,255,255,.10);
      --glass-border: rgba(255,255,255,.18);
      --glass-blur: blur(12px);
      --shadow: 0 14px 40px rgba(0,0,0,.28);

      --bg-overlay: rgba(0,0,0,.42);

      --snap-ms: 520ms;
      --fade-ms: 1200ms;

      /* topbar */
      --topbar-h: 64px;
      --topbar-gap: 12px;

      /* white panels */
      --panel-bg: #fff;
      --panel-text: #0f172a;
      --panel-border: rgba(15,23,42,.10);
      --panel-shadow: 0 14px 30px rgba(0,0,0,.22);

      --btn-bg: rgba(15,23,42,.06);
      --btn-bg-hover: rgba(15,23,42,.10);
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; margin:0; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      overflow:hidden;
      background:#000;
    }

    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }

    /* VIDEO BG */
    #video-bg{ position:fixed; inset:0; z-index:-10; overflow:hidden; }
    #video-bg video{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      opacity:0;
      transition: opacity var(--fade-ms) ease;
    }
    #video-bg video.is-visible{ opacity:1; }
    #video-bg .bg-overlay{ position:absolute; inset:0; background: var(--bg-overlay); }

    /* SECTIONS STACK */
    #sections{
      position:fixed; inset:0;
      transform: translateY(0);
      transition: transform var(--snap-ms) cubic-bezier(.2,.9,.2,1);
      will-change: transform;
    }
    .section{
      height:100vh;
      padding: var(--pad);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* CONTENT CONTAINER */
    .inner-container{
      width: min(var(--inner-max), 100%);
      height: calc(100vh - (var(--pad) * 2));
      border-radius: 18px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;

      /* space for topbar inside */
      padding: calc(var(--topbar-h) + var(--topbar-gap)) 18px 18px 18px;
    }

    /* page content scroll */
    .page-content{
      height: calc(100% - 0px);
      overflow:hidden;
    }
    .section[data-inner-scroll="true"] .page-content{
      height: calc(100% - 0px);
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding-right: 10px;
    }

    /* TOPBAR (white) */
    .topbar{
      position:absolute;
      left: 10px;
      right: 10px;
      top: 10px;
      height: var(--topbar-h);

      background: var(--panel-bg);
      color: var(--panel-text);
      border: 1px solid var(--panel-border);
      border-radius: 16px;
      box-shadow: var(--panel-shadow);

      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 10px 12px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }
    .brand img{
      width: 38px;
      height: 38px;
      object-fit: contain;
      border-radius: 10px;
      background: #fff;
      border: 1px solid rgba(15,23,42,.08);
      flex: 0 0 auto;
    }
    .brand-text{
      display:flex;
      flex-direction:column;
      gap: 2px;
      min-width: 0;
    }
    .brand-name{
      font-weight: 650;
      font-size: 14px;
      line-height: 1.1;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .brand-sub{
      font-size: 12px;
      opacity: .70;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .actions{
      display:flex;
      align-items:center;
      gap: 8px;
      flex: 0 0 auto;
      position:relative;
    }

    .icon-btn{
      width: 42px;
      height: 42px;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,.10);
      background: var(--btn-bg);
      cursor:pointer;
      display:grid;
      place-items:center;
      transition: background 140ms ease, transform 140ms ease;
      position:relative;
      padding:0;
    }
    .icon-btn:hover{ background: var(--btn-bg-hover); transform: translateY(-1px); }
    .icon-btn:focus{ outline: 2px solid rgba(15,23,42,.20); outline-offset: 2px; }
    .icon-btn svg{ display:block; }

    /* badge */
    .badge{
      position:absolute;
      top: 6px;
      right: 6px;
      min-width: 18px;
      height: 18px;
      padding: 0 5px;
      border-radius: 999px;
      background: #e11d48;
      color:#fff;
      font-size: 11px;
      line-height: 18px;
      font-weight: 700;
      text-align:center;
      box-shadow: 0 8px 18px rgba(225,29,72,.28);
    }

    /* dropdown panels (white) */
    .dropdown{
      position:absolute;
      top: calc(42px + 10px);
      right: 0;
      width: 320px;

      background: var(--panel-bg);
      color: var(--panel-text);
      border: 1px solid var(--panel-border);
      border-radius: 16px;
      box-shadow: var(--panel-shadow);

      opacity: 0;
      pointer-events: none;
      transform: translateY(-6px);
      transition: opacity 140ms ease, transform 160ms ease;
      overflow:hidden;
      z-index: 5;
    }
    .dropdown.is-open{
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .drop-head{
      padding: 12px 12px 10px 12px;
      font-size: 12px;
      letter-spacing: .06em;
      text-transform: uppercase;
      opacity: .75;
      border-bottom: 1px solid rgba(15,23,42,.08);
    }

    .drop-list{
      list-style:none;
      margin:0;
      padding: 6px;
      display:flex;
      flex-direction:column;
      gap: 6px;
    }

    .drop-item{
      width:100%;
      border: 0;
      border-radius: 12px;
      padding: 10px 10px;
      background: rgba(15,23,42,.04);
      cursor:pointer;
      text-align:left;
      color: var(--panel-text);
      transition: background 140ms ease, transform 140ms ease;
      display:flex;
      flex-direction:column;
      gap: 4px;
    }
    .drop-item:hover{ background: rgba(15,23,42,.07); transform: translateY(-1px); }

    .drop-title{ font-weight: 650; font-size: 13px; }
    .drop-sub{ font-size: 12px; opacity: .72; }

    .sep{
      height:1px;
      background: rgba(15,23,42,.10);
      margin: 4px 6px;
      border:0;
    }

    .drop-item.logout{
      background: rgba(225,29,72,.08);
    }
    .drop-item.logout:hover{
      background: rgba(225,29,72,.12);
    }

    @media (max-width: 520px){
      .dropdown{ width: min(320px, calc(100vw - 44px)); }
      .brand-sub{ display:none; }
    }
  </style>
</head>

<body>
  <div id="video-bg" aria-hidden="true">
    <video id="bgA" autoplay muted playsinline preload="auto"></video>
    <video id="bgB" autoplay muted playsinline preload="auto"></video>
    <div class="bg-overlay"></div>
  </div>

  <main id="sections">
    <!-- Übersicht -->
    <section id="overview" class="section" data-inner-scroll="false" data-title="Übersicht">
      <div class="inner-container">
        <header class="topbar">
          <div class="brand">
            <!-- PNG Logo: Pfad einfach anpassen -->
            <img src="assets/logo/windkompass_logo.png" alt="Logo" />
            <div class="brand-text">
              <div class="brand-name">WES WindKompass</div>
              <div class="brand-sub">Monitoring &amp; Auswertung</div>
            </div>
          </div>

          <div class="actions">
            <!-- Glocke -->
            <button class="icon-btn" type="button" data-action="toggle-notify" aria-label="Benachrichtigungen">
              <span class="badge" aria-label="2 Benachrichtigungen">2</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2Z" fill="currentColor" opacity=".85"/>
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" opacity=".85"/>
              </svg>
              <span class="sr-only">Benachrichtigungen</span>
            </button>

            <!-- Menu -->
            <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menü">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <line x1="4" y1="7" x2="20" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="17" x2="20" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span class="sr-only">Menü</span>
            </button>

            <!-- Notifications dropdown -->
            <div class="dropdown" data-panel="notify" role="menu" aria-label="Benachrichtigungen">
              <div class="drop-head">Benachrichtigungen</div>
              <ul class="drop-list">
                <li>
                  <button class="drop-item" type="button">
                    <div class="drop-title">Monatsberichte sind verfügbar</div>
                    <div class="drop-sub">Neue Auswertungen können jetzt geöffnet werden.</div>
                  </button>
                </li>
                <li>
                  <button class="drop-item" type="button">
                    <div class="drop-title">Parkbetreuer</div>
                    <div class="drop-sub">„Schönen guten Tag …“</div>
                  </button>
                </li>
              </ul>
            </div>

            <!-- Menu dropdown -->
            <div class="dropdown" data-panel="menu" role="menu" aria-label="Navigation">
              <div class="drop-head">Navigation</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button" data-target="overview"><div class="drop-title">Übersicht</div></button></li>
                <li><button class="drop-item" type="button" data-target="turbines"><div class="drop-title">Windenergieanlage</div></button></li>
                <li><button class="drop-item" type="button" data-target="redispatch"><div class="drop-title">Redispatch</div></button></li>
                <li><button class="drop-item" type="button" data-target="documents"><div class="drop-title">Dokumente</div></button></li>
                <li><button class="drop-item" type="button" data-target="account"><div class="drop-title">Konto</div></button></li>

                <li><hr class="sep"></li>

                <li><button class="drop-item logout" type="button" data-action="logout"><div class="drop-title">Abmelden</div></button></li>

                <li><hr class="sep"></li>

                <li><button class="drop-item" type="button" data-action="impressum"><div class="drop-title">Impressum &amp; Rechtliches</div></button></li>
              </ul>
            </div>
          </div>
        </header>

        <div class="page-content" data-load="sections/overview/content.html"></div>
      </div>
    </section>

    <!-- Windenergieanlage -->
    <section id="turbines" class="section" data-inner-scroll="true" data-title="Windenergieanlage">
      <div class="inner-container">
        <!-- gleiche Topbar (du kannst später serverseitig/templated sparen) -->
        <header class="topbar">
          <div class="brand">
            <img src="assets/logo/windkompass_logo.png" alt="Logo" />
            <div class="brand-text">
              <div class="brand-name">WES WindKompass</div>
              <div class="brand-sub">Monitoring &amp; Auswertung</div>
            </div>
          </div>
          <div class="actions">
            <button class="icon-btn" type="button" data-action="toggle-notify" aria-label="Benachrichtigungen">
              <span class="badge" aria-label="2 Benachrichtigungen">2</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2Z" fill="currentColor" opacity=".85"/>
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" opacity=".85"/>
              </svg>
              <span class="sr-only">Benachrichtigungen</span>
            </button>

            <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menü">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <line x1="4" y1="7" x2="20" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="17" x2="20" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span class="sr-only">Menü</span>
            </button>

            <div class="dropdown" data-panel="notify" role="menu" aria-label="Benachrichtigungen">
              <div class="drop-head">Benachrichtigungen</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button"><div class="drop-title">Monatsberichte sind verfügbar</div><div class="drop-sub">Neue Auswertungen können jetzt geöffnet werden.</div></button></li>
                <li><button class="drop-item" type="button"><div class="drop-title">Parkbetreuer</div><div class="drop-sub">„Schönen guten Tag …“</div></button></li>
              </ul>
            </div>

            <div class="dropdown" data-panel="menu" role="menu" aria-label="Navigation">
              <div class="drop-head">Navigation</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button" data-target="overview"><div class="drop-title">Übersicht</div></button></li>
                <li><button class="drop-item" type="button" data-target="turbines"><div class="drop-title">Windenergieanlage</div></button></li>
                <li><button class="drop-item" type="button" data-target="redispatch"><div class="drop-title">Redispatch</div></button></li>
                <li><button class="drop-item" type="button" data-target="documents"><div class="drop-title">Dokumente</div></button></li>
                <li><button class="drop-item" type="button" data-target="account"><div class="drop-title">Konto</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item logout" type="button" data-action="logout"><div class="drop-title">Abmelden</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item" type="button" data-action="impressum"><div class="drop-title">Impressum &amp; Rechtliches</div></button></li>
              </ul>
            </div>
          </div>
        </header>

        <div class="page-content" data-load="sections/turbines/content.html"></div>
      </div>
    </section>

    <!-- Redispatch -->
    <section id="redispatch" class="section" data-inner-scroll="false" data-title="Redispatch">
      <div class="inner-container">
        <header class="topbar">
          <div class="brand">
            <img src="assets/logo/windkompass_logo.png" alt="Logo" />
            <div class="brand-text">
              <div class="brand-name">WES WindKompass</div>
              <div class="brand-sub">Monitoring &amp; Auswertung</div>
            </div>
          </div>
          <div class="actions">
            <button class="icon-btn" type="button" data-action="toggle-notify" aria-label="Benachrichtigungen">
              <span class="badge" aria-label="2 Benachrichtigungen">2</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2Z" fill="currentColor" opacity=".85"/>
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" opacity=".85"/>
              </svg>
              <span class="sr-only">Benachrichtigungen</span>
            </button>

            <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menü">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <line x1="4" y1="7" x2="20" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="17" x2="20" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span class="sr-only">Menü</span>
            </button>

            <div class="dropdown" data-panel="notify" role="menu" aria-label="Benachrichtigungen">
              <div class="drop-head">Benachrichtigungen</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button"><div class="drop-title">Monatsberichte sind verfügbar</div><div class="drop-sub">Neue Auswertungen können jetzt geöffnet werden.</div></button></li>
                <li><button class="drop-item" type="button"><div class="drop-title">Parkbetreuer</div><div class="drop-sub">„Schönen guten Tag …“</div></button></li>
              </ul>
            </div>

            <div class="dropdown" data-panel="menu" role="menu" aria-label="Navigation">
              <div class="drop-head">Navigation</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button" data-target="overview"><div class="drop-title">Übersicht</div></button></li>
                <li><button class="drop-item" type="button" data-target="turbines"><div class="drop-title">Windenergieanlage</div></button></li>
                <li><button class="drop-item" type="button" data-target="redispatch"><div class="drop-title">Redispatch</div></button></li>
                <li><button class="drop-item" type="button" data-target="documents"><div class="drop-title">Dokumente</div></button></li>
                <li><button class="drop-item" type="button" data-target="account"><div class="drop-title">Konto</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item logout" type="button" data-action="logout"><div class="drop-title">Abmelden</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item" type="button" data-action="impressum"><div class="drop-title">Impressum &amp; Rechtliches</div></button></li>
              </ul>
            </div>
          </div>
        </header>

        <div class="page-content" data-load="sections/redispatch/content.html"></div>
      </div>
    </section>

    <!-- Dokumente -->
    <section id="documents" class="section" data-inner-scroll="true" data-title="Dokumente">
      <div class="inner-container">
        <header class="topbar">
          <div class="brand">
            <img src="assets/logo/windkompass_logo.png" alt="Logo" />
            <div class="brand-text">
              <div class="brand-name">WES WindKompass</div>
              <div class="brand-sub">Monitoring &amp; Auswertung</div>
            </div>
          </div>
          <div class="actions">
            <button class="icon-btn" type="button" data-action="toggle-notify" aria-label="Benachrichtigungen">
              <span class="badge" aria-label="2 Benachrichtigungen">2</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2Z" fill="currentColor" opacity=".85"/>
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" opacity=".85"/>
              </svg>
              <span class="sr-only">Benachrichtigungen</span>
            </button>

            <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menü">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <line x1="4" y1="7" x2="20" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="17" x2="20" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span class="sr-only">Menü</span>
            </button>

            <div class="dropdown" data-panel="notify" role="menu" aria-label="Benachrichtigungen">
              <div class="drop-head">Benachrichtigungen</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button"><div class="drop-title">Monatsberichte sind verfügbar</div><div class="drop-sub">Neue Auswertungen können jetzt geöffnet werden.</div></button></li>
                <li><button class="drop-item" type="button"><div class="drop-title">Parkbetreuer</div><div class="drop-sub">„Schönen guten Tag …“</div></button></li>
              </ul>
            </div>

            <div class="dropdown" data-panel="menu" role="menu" aria-label="Navigation">
              <div class="drop-head">Navigation</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button" data-target="overview"><div class="drop-title">Übersicht</div></button></li>
                <li><button class="drop-item" type="button" data-target="turbines"><div class="drop-title">Windenergieanlage</div></button></li>
                <li><button class="drop-item" type="button" data-target="redispatch"><div class="drop-title">Redispatch</div></button></li>
                <li><button class="drop-item" type="button" data-target="documents"><div class="drop-title">Dokumente</div></button></li>
                <li><button class="drop-item" type="button" data-target="account"><div class="drop-title">Konto</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item logout" type="button" data-action="logout"><div class="drop-title">Abmelden</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item" type="button" data-action="impressum"><div class="drop-title">Impressum &amp; Rechtliches</div></button></li>
              </ul>
            </div>
          </div>
        </header>

        <div class="page-content" data-load="sections/documents/content.html"></div>
      </div>
    </section>

    <!-- Konto -->
    <section id="account" class="section" data-inner-scroll="true" data-title="Konto">
      <div class="inner-container">
        <header class="topbar">
          <div class="brand">
            <img src="assets/logo/windkompass_logo.png" alt="Logo" />
            <div class="brand-text">
              <div class="brand-name">WES WindKompass</div>
              <div class="brand-sub">Monitoring &amp; Auswertung</div>
            </div>
          </div>
          <div class="actions">
            <button class="icon-btn" type="button" data-action="toggle-notify" aria-label="Benachrichtigungen">
              <span class="badge" aria-label="2 Benachrichtigungen">2</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2Z" fill="currentColor" opacity=".85"/>
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" opacity=".85"/>
              </svg>
              <span class="sr-only">Benachrichtigungen</span>
            </button>

            <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menü">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <line x1="4" y1="7" x2="20" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="4" y1="17" x2="20" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span class="sr-only">Menü</span>
            </button>

            <div class="dropdown" data-panel="notify" role="menu" aria-label="Benachrichtigungen">
              <div class="drop-head">Benachrichtigungen</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button"><div class="drop-title">Monatsberichte sind verfügbar</div><div class="drop-sub">Neue Auswertungen können jetzt geöffnet werden.</div></button></li>
                <li><button class="drop-item" type="button"><div class="drop-title">Parkbetreuer</div><div class="drop-sub">„Schönen guten Tag …“</div></button></li>
              </ul>
            </div>

            <div class="dropdown" data-panel="menu" role="menu" aria-label="Navigation">
              <div class="drop-head">Navigation</div>
              <ul class="drop-list">
                <li><button class="drop-item" type="button" data-target="overview"><div class="drop-title">Übersicht</div></button></li>
                <li><button class="drop-item" type="button" data-target="turbines"><div class="drop-title">Windenergieanlage</div></button></li>
                <li><button class="drop-item" type="button" data-target="redispatch"><div class="drop-title">Redispatch</div></button></li>
                <li><button class="drop-item" type="button" data-target="documents"><div class="drop-title">Dokumente</div></button></li>
                <li><button class="drop-item" type="button" data-target="account"><div class="drop-title">Konto</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item logout" type="button" data-action="logout"><div class="drop-title">Abmelden</div></button></li>
                <li><hr class="sep"></li>
                <li><button class="drop-item" type="button" data-action="impressum"><div class="drop-title">Impressum &amp; Rechtliches</div></button></li>
              </ul>
            </div>
          </div>
        </header>

        <div class="page-content" style="color:#fff; opacity:.95; padding: 6px 2px;">
          Konto (Demo)
        </div>
      </div>
    </section>
  </main>

  <script>
    const state = {
      index: 0,
      locked: false,
      sections: [],
      sectionIds: [],
      video: { list: [], idx: 0, fadeMs: 1200, fadeLeadMs: 1200, active: "A" }
    };

    const el = {
      stack: document.getElementById("sections"),
      bgA: document.getElementById("bgA"),
      bgB: document.getElementById("bgB"),
    };

    init().catch(console.error);

    async function init(){
      state.sections = Array.from(document.querySelectorAll(".section"));
      state.sectionIds = state.sections.map(s => s.id);

      setupHeaderUI();
      setupScrollSnap();

      await loadAllSections();
      await setupVideoPlaylist();

      goTo(0, false);
    }

    function setupHeaderUI(){
      document.querySelectorAll(".topbar").forEach(topbar => {
        const actions = topbar.querySelector(".actions");
        const notifyBtn = actions.querySelector('[data-action="toggle-notify"]');
        const menuBtn   = actions.querySelector('[data-action="toggle-menu"]');
        const notifyPanel = actions.querySelector('[data-panel="notify"]');
        const menuPanel   = actions.querySelector('[data-panel="menu"]');

        const closeAll = () => {
          notifyPanel.classList.remove("is-open");
          menuPanel.classList.remove("is-open");
        };

        notifyBtn.addEventListener("click", (e) => {
          e.preventDefault();
          const willOpen = !notifyPanel.classList.contains("is-open");
          closeAll();
          notifyPanel.classList.toggle("is-open", willOpen);
        });

        menuBtn.addEventListener("click", (e) => {
          e.preventDefault();
          const willOpen = !menuPanel.classList.contains("is-open");
          closeAll();
          menuPanel.classList.toggle("is-open", willOpen);
        });

        actions.addEventListener("click", (e) => {
          const t = e.target.closest("[data-target],[data-action]");
          if(!t) return;

          const target = t.getAttribute("data-target");
          const action = t.getAttribute("data-action");

          if (target){
            const i = state.sectionIds.indexOf(target);
            if (i >= 0) goTo(i);
            closeAll();
          }

          if (action === "logout"){
            alert("Abmelden (Demo)");
            closeAll();
          }
          if (action === "impressum"){
            alert("Impressum & Rechtliches (Demo)");
            closeAll();
          }
        });

        window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeAll(); });

        window.addEventListener("click", (e) => {
          const path = e.composedPath ? e.composedPath() : [];
          if (!path.includes(actions)) closeAll();
        });
      });
    }

    function setupScrollSnap(){
      window.addEventListener("wheel", onWheel, { passive:false });
      window.addEventListener("resize", () => goTo(state.index, false));
    }

    function onWheel(e){
      const inner = findInnerScrollable(e);
      if (inner && canInnerConsume(inner, e.deltaY)) return;

      e.preventDefault();
      if (state.locked) return;

      state.locked = true;
      const dir = Math.sign(e.deltaY);
      if (dir > 0) goTo(state.index + 1);
      if (dir < 0) goTo(state.index - 1);

      setTimeout(() => (state.locked = false), 520);
    }

    function findInnerScrollable(e){
      const path = e.composedPath ? e.composedPath() : [];
      return path.find(n =>
        n && n.classList && n.classList.contains("page-content") &&
        n.scrollHeight > n.clientHeight
      );
    }

    function canInnerConsume(inner, deltaY){
      const atTop = inner.scrollTop <= 0;
      const atBottom = inner.scrollTop + inner.clientHeight >= inner.scrollHeight - 1;
      if (deltaY > 0 && !atBottom) return true;
      if (deltaY < 0 && !atTop) return true;
      return false;
    }

    function goTo(i, animate=true){
      const max = state.sections.length - 1;
      const next = Math.max(0, Math.min(max, i));
      state.index = next;

      if (!animate) el.stack.style.transition = "none";
      el.stack.style.transform = `translateY(${-next * window.innerHeight}px)`;
      if (!animate) {
        void el.stack.offsetHeight;
        el.stack.style.transition = "";
      }
    }

    async function loadAllSections(){
      const targets = Array.from(document.querySelectorAll(".page-content[data-load]"));
      for (const container of targets){
        await loadHtmlInto(container, container.dataset.load);
      }
    }

    async function loadHtmlInto(container, url){
      try{
        const res = await fetch(url, { cache: "no-cache" });
        if(!res.ok) throw new Error(`Fetch failed ${res.status} for ${url}`);
        container.innerHTML = await res.text();
      }catch(err){
        container.innerHTML = `<div style="color:#fff; opacity:.9;">Fehler beim Laden: ${escapeHtml(url)}</div>`;
        console.error(err);
      }
    }

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[s]));
    }

    async function setupVideoPlaylist(){
      try{
        const res = await fetch("assets/videos/manifest.json", { cache:"no-cache" });
        if(!res.ok) throw new Error("No videos manifest");
        const json = await res.json();

        state.video.fadeMs = typeof json.fadeMs === "number" ? json.fadeMs : state.video.fadeMs;
        state.video.fadeLeadMs = typeof json.fadeLeadMs === "number" ? json.fadeLeadMs : state.video.fadeLeadMs;
        state.video.list = (json.videos || []).map(v => v.startsWith("http") ? v : `assets/videos/${v}`);
        if(state.video.list.length === 0) throw new Error("Empty video list");

        document.documentElement.style.setProperty("--fade-ms", `${state.video.fadeMs}ms`);

        await setVideoSource(el.bgA, state.video.list[0]);
        el.bgA.classList.add("is-visible");
        el.bgB.classList.remove("is-visible");
        state.video.active = "A";

        attachFadeScheduler(el.bgA);
      }catch(err){
        console.warn("Video playlist disabled:", err);
      }
    }

    function attachFadeScheduler(videoEl){
      const onReady = () => scheduleFade(videoEl);
      videoEl.addEventListener("loadedmetadata", onReady, { once:true });
      if (videoEl.duration && isFinite(videoEl.duration)) scheduleFade(videoEl);
      videoEl.addEventListener("ended", () => scheduleFade(videoEl));
    }

    function scheduleFade(currentEl){
      const dur = currentEl.duration;
      if(!dur || !isFinite(dur)) return;

      const lead = state.video.fadeLeadMs / 1000;
      const t = Math.max(0, dur - lead);

      if (currentEl._fadeTimer) clearTimeout(currentEl._fadeTimer);
      currentEl._fadeTimer = setTimeout(() => crossfadeToNext(), t * 1000);
    }

    async function crossfadeToNext(){
      if(state.video.list.length < 2) return;

      state.video.idx = (state.video.idx + 1) % state.video.list.length;
      const nextSrc = state.video.list[state.video.idx];

      const from = state.video.active === "A" ? el.bgA : el.bgB;
      const to   = state.video.active === "A" ? el.bgB : el.bgA;

      await setVideoSource(to, nextSrc);

      to.classList.add("is-visible");
      from.classList.remove("is-visible");

      state.video.active = (state.video.active === "A") ? "B" : "A";
      attachFadeScheduler(to);
    }

    async function setVideoSource(videoEl, src){
      return new Promise((resolve) => {
        try { videoEl.pause(); } catch {}
        videoEl.removeAttribute("src");
        videoEl.load();

        videoEl.src = src;

        const onCanPlay = async () => {
          try { await videoEl.play(); } catch {}
          resolve();
        };
        videoEl.addEventListener("canplay", onCanPlay, { once:true });
        videoEl.load();
      });
    }
  </script>
</body>
</html>
